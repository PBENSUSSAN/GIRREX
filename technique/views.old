# Fichier : technique/views.py

from django.shortcuts import render
from django.contrib.auth.decorators import login_required
from .models import Miso
# Importez MisoForm depuis votre fichier de formulaires
from .forms import MisoForm 

@login_required
def liste_miso_view(request):
    """
    Affiche la liste de tous les MISO (la bibliothèque).
    Pour l'instant, sans filtres pour rester simple.
    """
    # On récupère tous les MISO qui ne sont pas annulés
    miso_list = Miso.objects.exclude(statut_override=Miso.Statut.ANNULE)

    context = {
        'miso_list': miso_list,
        'titre': "Bibliothèque des Préavis de Maintenance (MISO)",
    }
    return render(request, 'technique/liste_miso.html', context)